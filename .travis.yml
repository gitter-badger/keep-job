language: java
jdk:
  - oraclejdk8
notification:
  email:
    recipients:
    - 13811785355@163.com
    on_success: always
    on_failure: always

before_script:
- echo "MAVEN_OPTS='-Xms1024m -Xmx3072m -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=384m'" > ~/.mavenrc

before_install:
- pip install --user codecov

after_success:
- mvn clean test jacoco:report coveralls:report
- codecov

branches:
  only:
  - master

env:
  global:
  - secure: "naC3DyOwY/B6/jmRkOSTLkllvT/cklChOv76/clGbArXlBONl69r+Ksb3Ru9kjvcw6EL2cgqWqZTNzJssRPeUrwGxfubiPg4qDuDbUV09pEChSBviAblidGRG49e6npEP5/vrqKjVNrLZQeQg9nZqEETbEXbLzPNwNdG/s1PIAD35jAHOPTxQ6s8rGGCsYQsYTyVZ4icUd2eDR7BTNCLVAt+yzfHukcgJY3ramSKZw5wkgyg78KWNUVJfcbR/dyH0qM1uZlCaTyA/sLqSYuJsm08XyGgejjntqsfDySQEGMq54SuyM5QEcxgXLtRxzlbkxv5+nmFcx57lNpQMVcieyZ0ULEFYp8L47CidnTKPCjH4BLyD0svfvzovBgwEf/roVYpTWQfBL+W3bcqTgnpST8TxeQ0imntcjNVcYFAonrY6T4dSFolTzwsd4t35xv1rIo5KCGJ1H56wiZZ2njlnPF7AzYSyNkAKSOu1YXOgAwh/g/CXFj7UqledWXgEfH+kRs8ssACd5bD2Hx/2sBwo1gzgsBD2Uzl/SS8aN9c/sZdPydh/1IcngyIB7CUK/vxE5C6kVUaMmaZVFFkGFHjshrSgYYi3k/qo3Aj49r9rCdghKPj5xh2Kj8RXOMA0BU/prvSGPOsD8LNSVam48SPX497zW4aQTbOuvkJB2iXaiI="
  - "MAVEN_OPTS=-Xms1024m -Xmx3072m -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=384m"

addons:
  coverity_scan:
    project:
      name: "zhangxuexiang/keep-job"
      description: "Build submitted via Travis CI"
    notification_email: 13811785355@163.com
    build_command_prepend: "mvn clean"
    build_command: "mvn -DskipTests=true compile"
    branch_pattern: master